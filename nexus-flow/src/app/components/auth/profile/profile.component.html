<div class="profile-container">
  <div class="page-header mb-4">
    <h1 class="page-title">Profile</h1>
    <p class="page-subtitle">Manage your personal information and account settings</p>
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage()" class="alert alert-success alert-dismissible fade show" role="alert">
    <i class="fas fa-check-circle me-2"></i>
    {{ successMessage() }}
    <button type="button" class="btn-close" (click)="successMessage.set('')"></button>
  </div>

  <div class="row g-4">
    <!-- Profile Information -->
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-user me-2"></i>Personal Information
          </h5>
        </div>
        <div class="card-body">
          <form [formGroup]="profileForm" *ngIf="user()">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">First Name</label>
                <input
                  type="text"
                  formControlName="firstName"
                  class="form-control"
                  [readonly]="!isEditing()">
              </div>
              <div class="col-md-6">
                <label class="form-label">Last Name</label>
                <input
                  type="text"
                  formControlName="lastName"
                  class="form-control"
                  [readonly]="!isEditing()">
              </div>
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  formControlName="email"
                  class="form-control"
                  [readonly]="!isEditing()">
              </div>
              <div class="col-md-6">
                <label class="form-label">Username</label>
                <input
                  type="text"
                  formControlName="username"
                  class="form-control"
                  readonly>
              </div>
              <div class="col-12">
                <label class="form-label">Bio</label>
                <textarea
                  formControlName="bio"
                  class="form-control"
                  rows="3"
                  placeholder="Tell us about yourself..."
                  [readonly]="!isEditing()"></textarea>
              </div>
            </div>

            <div class="form-actions mt-4">
              <button
                *ngIf="!isEditing()"
                type="button"
                class="btn btn-primary"
                (click)="onEdit()">
                <i class="fas fa-edit me-2"></i>Edit Profile
              </button>
              
              <div *ngIf="isEditing()" class="d-flex gap-2">
                <button
                  type="button"
                  class="btn btn-success"
                  (click)="onSave()"
                  [disabled]="profileForm.invalid || isLoading()">
                  <span *ngIf="!isLoading()">Save Changes</span>
                  <div *ngIf="isLoading()" class="spinner-border spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                  </div>
                </button>
                <button
                  type="button"
                  class="btn btn-secondary"
                  (click)="onCancel()">
                  Cancel
                </button>
              </div>
            </div>
          </form>

          <div *ngIf="isLoading() && !user()" class="loading-state">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p>Loading profile...</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Account Settings -->
    <div class="col-lg-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-cog me-2"></i>Account Settings
          </h5>
        </div>
        <div class="card-body">
          <div class="settings-list">
            <div class="setting-item">
              <div class="setting-info">
                <h6>Change Password</h6>
                <p class="text-muted">Update your password regularly</p>
              </div>
              <button class="btn btn-outline-primary btn-sm" (click)="changePassword()">
                Change
              </button>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <h6>Two-Factor Authentication</h6>
                <p class="text-muted">Add an extra layer of security</p>
              </div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch">
              </div>
            </div>
            
            <div class="setting-item">
              <div class="setting-info">
                <h6>Email Notifications</h6>
                <p class="text-muted">Receive updates and alerts</p>
              </div>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" checked>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- User Stats -->
      <div class="card mt-4">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-chart-bar me-2"></i>Quick Stats
          </h5>
        </div>
        <div class="card-body">
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value">12</div>
              <div class="stat-label">Projects</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">45</div>
              <div class="stat-label">Tasks</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">89%</div>
              <div class="stat-label">Completed</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>